<div class="card">
    <h1>Air Quality Reports</h1>
    <p>Community-submitted air quality observations across NYC.</p>

    <div style="margin-bottom: 2rem;">
        <a href="/reports/create" class="btn">Submit New Report</a>
        <a href="/reports/my" class="btn btn-secondary" style="margin-left: 1rem;">My Reports</a>
    </div>

    {{#if reports.length}}
        <div class="reports-grid">
            {{#each reports}}
            <div class="result-card">
                <h3>{{this.neighborhood}}, {{this.borough}}</h3>
                
                <p><strong>Type:</strong> {{this.reportType}}</p>
                
                <p><strong>Severity:</strong> 
                    <span class="score {{#if (eq this.severity "High")}}high-risk{{else}}{{#if (eq this.severity "Medium")}}moderate{{else}}safe{{/if}}{{/if}}">
                        {{this.severity}}
                    </span>
                </p>
                
                <p><strong>Status:</strong> 
                    <span class="score {{#if (eq this.status "Resolved")}}safe{{else}}{{#if (eq this.status "Reviewed")}}moderate{{else}}high-risk{{/if}}{{/if}}">
                        {{this.status}}
                    </span>
                </p>
                
                <p><strong>Description:</strong> {{this.description}}</p>
                
                <p style="font-size: 0.9rem; color: #718096;">
                    <strong>Reported:</strong> {{this.createdAt}}
                </p>
                
                <a href="/reports/{{toString this._id}}" class="btn">View Details</a>
            </div>
            {{/each}}
        </div>

        <!-- Pagination -->
        {{#if (gt totalPages 1)}}
        <div style="margin-top: 2rem; text-align: center;">
            {{#if (gt currentPage 1)}}
                <a href="/reports?page={{subtract currentPage 1}}" class="btn btn-secondary">← Previous</a>
            {{/if}}
            
            <span style="margin: 0 1rem; font-weight: 600;">Page {{currentPage}} of {{totalPages}}</span>
            
            {{#if (lt currentPage totalPages)}}
                <a href="/reports?page={{add currentPage 1}}" class="btn btn-secondary">Next →</a>
            {{/if}}
        </div>
        {{/if}}
    {{else}}
        <div style="text-align: center; padding: 3rem; background: #f7fafc; border-radius: 8px;">
            <p style="font-size: 1.2rem; margin-bottom: 1rem;">No reports have been submitted yet.</p>
            <p style="margin-bottom: 2rem; color: #718096;">Be the first to report an air quality issue in your neighborhood!</p>
            <a href="/reports/create" class="btn">Submit First Report</a>
        </div>
    {{/if}}
</div>

<style>
.reports-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-top: 2rem;
}
</style>