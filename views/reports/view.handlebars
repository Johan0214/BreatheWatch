<div class="card">
    <h1>Report Details</h1>

    <div style="background: #f7fafc; padding: 2rem; border-radius: 8px; margin-top: 1rem;">
        <h2>{{report.neighborhood}}, {{report.borough}}</h2>
        
        <div style="margin-top: 1.5rem;">
            <p><strong>Report Type:</strong> {{report.reportType}}</p>
            
            <p><strong>Severity:</strong> 
                <span class="score {{#if (eq report.severity "High")}}high-risk{{else}}{{#if (eq report.severity "Medium")}}moderate{{else}}safe{{/if}}{{/if}}">
                    {{report.severity}}
                </span>
            </p>
            
            <p><strong>Status:</strong> 
                <span id="reportStatus" class="score {{#if (eq report.status "Resolved")}}safe{{else}}{{#if (eq report.status "Reviewed")}}moderate{{else}}high-risk{{/if}}{{/if}}">
                    {{report.status}}
                </span>
            </p>
            
            <p><strong>Submitted:</strong> {{report.createdAt}}</p>
            
            <p><strong>Report ID:</strong> <code style="background: #e2e8f0; padding: 0.25rem 0.5rem; border-radius: 4px;">{{toString report._id}}</code></p>
        </div>

        <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid #e2e8f0;">
            <h3>Description</h3>
            <p style="margin-top: 0.5rem; line-height: 1.6; background: white; padding: 1rem; border-radius: 4px;">
                {{report.description}}
            </p>
        </div>

        <!-- Update Status Section -->
        <div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid #e2e8f0;">
            <h3>Update Report Status</h3>
            <p style="font-size: 0.9rem; color: #718096; margin-bottom: 1rem;">
                Change the status of this report to track its progress through the review process.
            </p>
            
            <div style="display: flex; gap: 1rem; align-items: center; flex-wrap: wrap;">
                <select id="newStatus" style="flex: 1; max-width: 300px;">
                    <option value="Open" {{#if (eq report.status "Open")}}selected{{/if}}>Open - Issue reported</option>
                    <option value="Reviewed" {{#if (eq report.status "Reviewed")}}selected{{/if}}>Reviewed - Under investigation</option>
                    <option value="Resolved" {{#if (eq report.status "Resolved")}}selected{{/if}}>Resolved - Issue addressed</option>
                </select>
                <button onclick="updateReportStatus('{{toString report._id}}')" class="btn">Update Status</button>
            </div>
            
            <div id="statusError" class="error" style="margin-top: 1rem;"></div>
            <div id="statusSuccess" class="success" style="margin-top: 1rem; display: none;"></div>
        </div>

        <!-- Related Actions -->
        <div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid #e2e8f0;">
            <h3>Related Actions</h3>
            <p style="font-size: 0.9rem; color: #718096; margin-bottom: 1rem;">
                View more information about this location
            </p>
            <a href="/reports/pollution-map">
                View Air Quality Data
            </a>
        </div>
    </div>

    <div style="margin-top: 2rem;">
        <a href="/reports" class="btn btn-secondary">‚Üê Back to All Reports</a>
        <a href="/reports/my" class="btn btn-secondary" style="margin-left: 1rem;">My Reports</a>
    </div>
</div>

<script src="/public/js/reports.js"></script>